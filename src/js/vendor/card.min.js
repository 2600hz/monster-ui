/**
 * https://cdnjs.cloudflare.com/ajax/libs/card/0.1.4/js/card.min.js
 */
!function(b){if("object"==typeof exports){module.exports=b()}else{if("function"==typeof define&&define.amd){define(b)}else{var a;"undefined"!=typeof window?a=window:"undefined"!=typeof global?a=global:"undefined"!=typeof self&&(a=self),a.card=b()}}}(function(){var d,b,a;return(function c(f,k,h){function g(n,l){if(!k[n]){if(!f[n]){var i=typeof require=="function"&&require;if(!l&&i){return i(n,!0)}if(e){return e(n,!0)}throw new Error("Cannot find module '"+n+"'")}var m=k[n]={exports:{}};f[n][0].call(m.exports,function(o){var p=f[n][1][o];return g(p?p:o)},m,m.exports,c,f,k,h)}return k[n].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(g,f,e){(function(){var k,h,p,j,o,r,u,x,w,n,s,y,l,A,q,v,z,C,m,B,t=[].slice,i=[].indexOf||function(F){for(var E=0,D=this.length;E<D;E++){if(E in this&&this[E]===F){return E}}return -1};k=jQuery;k.payment={};k.payment.fn={};k.fn.payment=function(){var D,E;E=arguments[0],D=2<=arguments.length?t.call(arguments,1):[];return k.payment.fn[E].apply(this,D)};o=/(\d{1,4})/g;j=[{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:o,length:[16],cvcLength:[3],luhn:true},{type:"maestro",pattern:/^(5(018|0[23]|[68])|6(39|7))/,format:o,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:true},{type:"forbrugsforeningen",pattern:/^600/,format:o,length:[16],cvcLength:[3],luhn:true},{type:"dankort",pattern:/^5019/,format:o,length:[16],cvcLength:[3],luhn:true},{type:"visa",pattern:/^4/,format:o,length:[13,16],cvcLength:[3],luhn:true},{type:"mastercard",pattern:/^5[0-5]/,format:o,length:[16],cvcLength:[3],luhn:true},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:true},{type:"dinersclub",pattern:/^3[0689]/,format:o,length:[14],cvcLength:[3],luhn:true},{type:"discover",pattern:/^6([045]|22)/,format:o,length:[16],cvcLength:[3],luhn:true},{type:"unionpay",pattern:/^(62|88)/,format:o,length:[16,17,18,19],cvcLength:[3],luhn:false},{type:"jcb",pattern:/^35/,format:o,length:[16],cvcLength:[3],luhn:true}];h=function(F){var E,G,D;F=(F+"").replace(/\D/g,"");for(G=0,D=j.length;G<D;G++){E=j[G];if(E.pattern.test(F)){return E}}};p=function(F){var E,G,D;for(G=0,D=j.length;G<D;G++){E=j[G];if(E.type===F){return E}}};l=function(E){var J,I,H,F,G,D;H=true;F=0;I=(E+"").split("").reverse();for(G=0,D=I.length;G<D;G++){J=I[G];J=parseInt(J,10);if((H=!H)){J*=2}if(J>9){J-=9}F+=J}return F%10===0};y=function(D){var E;if((D.prop("selectionStart")!=null)&&D.prop("selectionStart")!==D.prop("selectionEnd")){return true}if(typeof document!=="undefined"&&document!==null?(E=document.selection)!=null?typeof E.createRange==="function"?E.createRange().text:void 0:void 0:void 0){return true}return false};A=function(D){return setTimeout(function(){var E,F;E=k(D.currentTarget);F=E.val();F=k.payment.formatCardNumber(F);return E.val(F)})};x=function(I){var D,E,K,G,F,J,H;K=String.fromCharCode(I.which);if(!/^\d+$/.test(K)){return}D=k(I.currentTarget);H=D.val();E=h(H+K);G=(H.replace(/\D/g,"")+K).length;J=16;if(E){J=E.length[E.length.length-1]}if(G>=J){return}if((D.prop("selectionStart")!=null)&&D.prop("selectionStart")!==H.length){return}if(E&&E.type==="amex"){F=/^(\d{4}|\d{4}\s\d{6})$/}else{F=/(?:^|\s)(\d{4})$/}if(F.test(H)){I.preventDefault();return setTimeout(function(){return D.val(H+" "+K)})}else{if(F.test(H+K)){I.preventDefault();return setTimeout(function(){return D.val(H+K+" ")})}}};r=function(F){var D,E;D=k(F.currentTarget);E=D.val();if(F.which!==8){return}if((D.prop("selectionStart")!=null)&&D.prop("selectionStart")!==E.length){return}if(/\d\s$/.test(E)){F.preventDefault();return setTimeout(function(){return D.val(E.replace(/\d\s$/,""))})}else{if(/\s\d?$/.test(E)){F.preventDefault();return setTimeout(function(){return D.val(E.replace(/\s\d?$/,""))})}}};q=function(D){return setTimeout(function(){var E,F;E=k(D.currentTarget);F=E.val();F=k.payment.formatExpiry(F);return E.val(F)})};w=function(E){var D,G,F;G=String.fromCharCode(E.which);if(!/^\d+$/.test(G)){return}D=k(E.currentTarget);F=D.val()+G;if(/^\d$/.test(F)&&(F!=="0"&&F!=="1")){E.preventDefault();return setTimeout(function(){return D.val("0"+F+" / ")})}else{if(/^\d\d$/.test(F)){E.preventDefault();return setTimeout(function(){return D.val(""+F+" / ")})}}};n=function(E){var D,G,F;G=String.fromCharCode(E.which);if(!/^\d+$/.test(G)){return}D=k(E.currentTarget);F=D.val();if(/^\d\d$/.test(F)){return D.val(""+F+" / ")}};s=function(E){var D,G,F;F=String.fromCharCode(E.which);if(!(F==="/"||F===" ")){return}D=k(E.currentTarget);G=D.val();if(/^\d$/.test(G)&&G!=="0"){return D.val("0"+G+" / ")}};u=function(F){var D,E;D=k(F.currentTarget);E=D.val();if(F.which!==8){return}if((D.prop("selectionStart")!=null)&&D.prop("selectionStart")!==E.length){return}if(/\s\/\s\d?$/.test(E)){F.preventDefault();return setTimeout(function(){return D.val(E.replace(/\s\/\s\d?$/,""))})}};m=function(E){var D;if(E.metaKey||E.ctrlKey){return true}if(E.which===32){return false}if(E.which===0){return true}if(E.which<33){return true}D=String.fromCharCode(E.which);return !!/[\d\s]/.test(D)};z=function(G){var D,E,H,F;D=k(G.currentTarget);H=String.fromCharCode(G.which);if(!/^\d+$/.test(H)){return}if(y(D)){return}F=(D.val()+H).replace(/\D/g,"");E=h(F);if(E){return F.length<=E.length[E.length.length-1]}else{return F.length<=16}};C=function(F){var D,G,E;D=k(F.currentTarget);G=String.fromCharCode(F.which);if(!/^\d+$/.test(G)){return}if(y(D)){return}E=D.val()+G;E=E.replace(/\D/g,"");if(E.length>6){return false}};v=function(E){var D,G,F;D=k(E.currentTarget);G=String.fromCharCode(E.which);if(!/^\d+$/.test(G)){return}if(y(D)){return}F=D.val()+G;return F.length<=4};B=function(H){var E,G,F,D,I;E=k(H.currentTarget);I=E.val();D=k.payment.cardType(I)||"unknown";if(!E.hasClass(D)){G=(function(){var L,K,J;J=[];for(L=0,K=j.length;L<K;L++){F=j[L];J.push(F.type)}return J})();E.removeClass("unknown");E.removeClass(G.join(" "));E.addClass(D);E.toggleClass("identified",D!=="unknown");return E.trigger("payment.cardType",D)}};k.payment.fn.formatCardCVC=function(){this.payment("restrictNumeric");this.on("keypress",v);return this};k.payment.fn.formatCardExpiry=function(){this.payment("restrictNumeric");this.on("keypress",C);this.on("keypress",w);this.on("keypress",s);this.on("keypress",n);this.on("keydown",u);this.on("change",q);this.on("input",q);return this};k.payment.fn.formatCardNumber=function(){this.payment("restrictNumeric");this.on("keypress",z);this.on("keypress",x);this.on("keydown",r);this.on("keyup",B);this.on("paste",A);this.on("change",A);this.on("input",A);this.on("input",B);return this};k.payment.fn.restrictNumeric=function(){this.on("keypress",m);return this};k.payment.fn.cardExpiryVal=function(){return k.payment.cardExpiryVal(k(this).val())};k.payment.cardExpiryVal=function(G){var H,F,D,E;G=G.replace(/\s/g,"");E=G.split("/",2),H=E[0],D=E[1];if((D!=null?D.length:void 0)===2&&/^\d+$/.test(D)){F=(new Date).getFullYear();F=F.toString().slice(0,2);D=F+D}H=parseInt(H,10);D=parseInt(D,10);return{month:H,year:D}};k.payment.validateCardNumber=function(E){var D,F;E=(E+"").replace(/\s+|-/g,"");if(!/^\d+$/.test(E)){return false}D=h(E);if(!D){return false}return(F=E.length,i.call(D.length,F)>=0)&&(D.luhn===false||l(E))};k.payment.validateCardExpiry=function(H,E){var F,D,G;if(typeof H==="object"&&"month" in H){G=H,H=G.month,E=G.year}if(!(H&&E)){return false}H=k.trim(H);E=k.trim(E);if(!/^\d+$/.test(H)){return false}if(!/^\d+$/.test(E)){return false}if(!((1<=H&&H<=12))){return false}if(E.length===2){if(E<70){E="20"+E}else{E="19"+E}}if(E.length!==4){return false}D=new Date(E,H);F=new Date;D.setMonth(D.getMonth()-1);D.setMonth(D.getMonth()+1,1);return D>F};k.payment.validateCardCVC=function(E,F){var D,G;E=k.trim(E);if(!/^\d+$/.test(E)){return false}D=p(F);if(D!=null){return G=E.length,i.call(D.cvcLength,G)>=0}else{return E.length>=3&&E.length<=4}};k.payment.cardType=function(D){var E;if(!D){return null}return((E=h(D))!=null?E.type:void 0)||null};k.payment.formatCardNumber=function(F){var E,D,H,G;E=h(F);if(!E){return F}H=E.length[E.length.length-1];F=F.replace(/\D/g,"");F=F.slice(0,H);if(E.format.global){return(G=F.match(E.format))!=null?G.join(" "):void 0}else{D=E.format.exec(F);if(D==null){return}D.shift();D=k.grep(D,function(I){return I});return D.join(" ")}};k.payment.formatExpiry=function(E){var G,H,D,F;H=E.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/);if(!H){return""}G=H[1]||"";D=H[2]||"";F=H[3]||"";if(F.length>0||(D.length>0&&!(/\ \/?\ ?/.test(D)))){D=" / "}if(G.length===1&&(G!=="0"&&G!=="1")){G="0"+G;D=" / "}return G+D+F}}).call(this)},{}],2:[function(i,g,f){var j,e,h=[].indexOf||function(o){for(var n=0,m=this.length;n<m;n++){if(n in this&&this[n]===o){return n}}return -1},k=[].slice;i("jquery.payment");j=jQuery;j.card={};j.card.fn={};j.fn.card=function(l){return j.card.fn.construct.apply(this,l)};e=(function(){l.prototype.cardTemplate='<div class="card-container">\n    <div class="card">\n        <div class="front">\n                <div class="card-logo visa">visa</div>\n                <div class="card-logo mastercard">MasterCard</div>\n                <div class="card-logo amex"></div>\n                <div class="card-logo discover">discover</div>\n            <div class="lower">\n                <div class="shiny"></div>\n                <div class="cvc display">{{cvc}}</div>\n                <div class="number display">{{number}}</div>\n                <div class="name display">{{name}}</div>\n                <div class="expiry display" data-before="{{monthYear}}" data-after="{{validDate}}">{{expiry}}</div>\n            </div>\n        </div>\n        <div class="back">\n            <div class="bar"></div>\n            <div class="cvc display">{{cvc}}</div>\n            <div class="shiny"></div>\n        </div>\n    </div>\n</div>';l.prototype.template=function(m,n){return m.replace(/\{\{(.*?)\}\}/g,function(o,p,q){return n[p]})};l.prototype.cardTypes=["maestro","dinersclub","laser","jcb","unionpay","discover","mastercard","amex","visa"];l.prototype.defaults={formatting:true,formSelectors:{numberInput:'input[name="number"]',expiryInput:'input[name="expiry"]',cvcInput:'input[name="cvc"]',nameInput:'input[name="name"]'},cardSelectors:{cardContainer:".card-container",card:".card",numberDisplay:".number",expiryDisplay:".expiry",cvcDisplay:".cvc",nameDisplay:".name"},messages:{validDate:"valid\nthru",monthYear:"month/year"},values:{number:"&bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull; &bull;&bull;&bull;&bull;",cvc:"&bull;&bull;&bull;",expiry:"&bull;&bull;/&bull;&bull;",name:"Full Name"},classes:{valid:"card-valid",invalid:"card-invalid"},debug:false};function l(m,n){this.options=j.extend(true,{},this.defaults,n);j.extend(this.options.messages,j.card.messages);j.extend(this.options.values,j.card.values);this.$el=j(m);if(!this.options.container){console.log("Please provide a container");return}this.$container=j(this.options.container);this.render();this.attachHandlers();this.handleInitialValues()}l.prototype.render=function(){var m,n;this.$container.append(this.template(this.cardTemplate,j.extend({},this.options.messages,this.options.values)));j.each(this.options.cardSelectors,(function(o){return function(q,p){return o["$"+q]=o.$container.find(p)}})(this));j.each(this.options.formSelectors,(function(o){return function(q,p){var r;if(o.options[q]){r=j(o.options[q])}else{r=o.$el.find(p)}if(!r.length&&o.options.debug){console.error("Card can't find a "+q+" in your form.")}return o["$"+q]=r}})(this));if(this.options.formatting){this.$numberInput.payment("formatCardNumber");this.$cvcInput.payment("formatCardCVC");if(this.$expiryInput.length===1){this.$expiryInput.payment("formatCardExpiry")}}if(this.options.width){m=parseInt(this.$cardContainer.css("width"));this.$cardContainer.css("transform","scale("+(this.options.width/m)+")")}if(typeof navigator!=="undefined"&&navigator!==null?navigator.userAgent:void 0){n=navigator.userAgent.toLowerCase();if(n.indexOf("safari")!==-1&&n.indexOf("chrome")===-1){this.$card.addClass("safari")}}if(new Function("/*@cc_on return @_jscript_version; @*/")()){this.$card.addClass("ie-10")}if(/rv:11.0/i.test(navigator.userAgent)){return this.$card.addClass("ie-11")}};l.prototype.attachHandlers=function(){var m;this.$numberInput.bindVal(this.$numberDisplay,{fill:false,filters:this.validToggler("cardNumber")}).on("payment.cardType",this.handle("setCardType"));m=[function(n){return n.replace(/(\s+)/g,"")}];if(this.$expiryInput.length===1){m.push(this.validToggler("cardExpiry"))}this.$expiryInput.bindVal(this.$expiryDisplay,{join:function(n){if(n[0].length===2||n[1]){return"/"}else{return""}},filters:m});this.$cvcInput.bindVal(this.$cvcDisplay,{filters:this.validToggler("cardCVC")}).on("focus",this.handle("flipCard")).on("blur",this.handle("unflipCard"));return this.$nameInput.bindVal(this.$nameDisplay,{fill:false,filters:this.validToggler("cardHolderName"),join:" "}).on("keydown",this.handle("captureName"))};l.prototype.handleInitialValues=function(){return j.each(this.options.formSelectors,(function(m){return function(o,n){var p;p=m["$"+o];if(p.val()){p.trigger("paste");return setTimeout(function(){return p.trigger("keyup")})}}})(this))};l.prototype.handle=function(m){return(function(n){return function(q){var p,o;p=j(q.currentTarget);o=Array.prototype.slice.call(arguments);o.unshift(p);return n.handlers[m].apply(n,o)}})(this)};l.prototype.validToggler=function(m){var n;if(m==="cardExpiry"){n=function(p){var o;o=j.payment.cardExpiryVal(p);return j.payment.validateCardExpiry(o.month,o.year)}}else{if(m==="cardCVC"){n=(function(o){return function(p){return j.payment.validateCardCVC(p,o.cardType)}})(this)}else{if(m==="cardNumber"){n=function(o){return j.payment.validateCardNumber(o)}}else{if(m==="cardHolderName"){n=function(o){return o!==""}}}}}return(function(o){return function(r,s,q){var p;p=n(r);o.toggleValidClass(s,p);o.toggleValidClass(q,p);return r}})(this)};l.prototype.toggleValidClass=function(m,n){m.toggleClass(this.options.classes.valid,n);return m.toggleClass(this.options.classes.invalid,!n)};l.prototype.handlers={setCardType:function(n,o,m){if(!this.$card.hasClass(m)){this.$card.removeClass("unknown");this.$card.removeClass(this.cardTypes.join(" "));this.$card.addClass(m);this.$card.toggleClass("identified",m!=="unknown");return this.cardType=m}},flipCard:function(){return this.$card.addClass("flipped")},unflipCard:function(){return this.$card.removeClass("flipped")},captureName:function(o,q){var m,n,p;p=q.which||q.keyCode;n=[48,49,50,51,52,53,54,55,56,57,106,107,109,110,111,186,187,188,189,190,191,192,219,220,221,222];m=[189,109,190,110,222];if(n.indexOf(p)!==-1&&!(!q.shiftKey&&h.call(m,p)>=0)){return q.preventDefault()}}};j.fn.bindVal=function(m,r){var q,p,n,s,t;if(r==null){r={}}r.fill=r.fill||false;r.filters=r.filters||[];if(!(r.filters instanceof Array)){r.filters=[r.filters]}r.join=r.join||"";if(!(typeof r.join==="function")){n=r.join;r.join=function(){return n}}q=j(this);t=(function(){var v,u,o;o=[];for(p=v=0,u=m.length;v<u;p=++v){s=m[p];o.push(m.eq(p).text())}return o})();q.on("focus",function(){return m.addClass("focused")});q.on("blur",function(){return m.removeClass("focused")});q.on("keyup change paste",function(B){var u,v,D,w,z,y,C,o,A,x;w=q.map(function(){return j(this).val()}).get();v=r.join(w);w=w.join(v);if(w===v){w=""}A=r.filters;for(z=0,C=A.length;z<C;z++){u=A[z];w=u(w,q,m)}x=[];for(p=y=0,o=m.length;y<o;p=++y){s=m[p];if(r.fill){D=w+t[p].substring(w.length)}else{D=w||t[p]}x.push(m.eq(p).text(D))}return x});return q};return l})();j.fn.extend({card:function(){var l,m;m=arguments[0],l=2<=arguments.length?k.call(arguments,1):[];return this.each(function(){var o,n;o=j(this);n=o.data("card");if(!n){o.data("card",(n=new e(this,m)))}if(typeof m==="string"){return n[m].apply(n,l)}})}})},{"jquery.payment":1}]},{},[2])(2)});
